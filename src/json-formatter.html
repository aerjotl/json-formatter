<div ng-init="isOpen = open && open > 0" class="json-formatter-row">
  <a ng-click="toggleOpen()">
    <span class="toggler {{isOpen ? 'open' : ''}}" ng-if="isObject()"></span>
    <span class="key" ng-if="hasKey"><span ng-if="valid">"</span>{{key}}:<span ng-if="valid">"</span></span>
    <span class="value">
      <span ng-if="isObject()">
        <span class="constructor-name" data-content="{{getConstructorName(json)}}"></span>
        <span>{</span>
        <span class="array-constructor-name" ng-if="isArray()"><span class="bracket">[</span><span class="array-length number" data-content="{{json.length}}"></span><span class="bracket">]</span></span>
      </span>
      <span ng-if="!isObject()" ng-click="openLink(isUrl)" class="{{type}}" ng-class="{date: isDate, url: isUrl}">{{parseValue(json)}}</span>
    </span>
  </a>
  <div class="children" ng-if="getKeys().length && isOpen">
    <json-formatter ng-repeat="key in getKeys()" json="json[key]" key="key" open="childrenOpen()" valid="valid"></json-formatter>
  </div>
  <div class="children empty object" ng-if="isEmptyObject()"></div>
  <div class="children empty array" ng-if="getKeys() && !getKeys().length && isOpen && isArray()"></div>
  <span ng-if="valid">,</span>
  <span ng-if="isObject()">}</span>
</div>
